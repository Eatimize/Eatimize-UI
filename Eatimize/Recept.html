
  <!DOCTYPE html>
  <html>

    <head>
        <title>EATIMIZE</title>
        <meta charset="utf-8">
        <link href="http://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
        
         <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
 
        <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
        
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        
        
        <!-- Ta bort senare? -->
    <style>
            .row {
                padding: 10px;
            }

            .brand-logo {
                margin-left: 20px;
            }


    </style>

    <!--

LUDWIGS CSS:

<link href="css/style.css" type="text/css" rel="stylesheet" media="screen, projection"/>

--><script>
            
            $(document).ready(function(){
                
                //detta fungerar bara om man kör från localhost eller i annan webbläsare än chrome: 
                $('#navbar').load('navbar.tpl');         

                $('#searchBtn').click(function(){
                    
                       res = $('#searchField').val();                  
                      getResult(res);
                });
            }); 
            
            
              //HÄMTA FILM FRÅN IMDB: 
            function getResult(title){                
                               
                //IMDB-api - ska bytas ut: 
                    $.getJSON('https://www.omdbapi.com/?s=' + encodeURI(title)+'&plot=short').then(function(response){
                
                // Anrop till lokal databas istället: 
               /* $.getJSON('http://localhost:8080/api/1/1.2/man/75/175/goal/25/type').then(function(response){
                    
                    console.log(response);
                    */
                        
                   var movies = response.Search;
                                                   
                    $.each(response.Search, function(index, item){
                            
                    $.get("keycard.tpl", function(data){
                            
                    $(".row").append(replaceContent(data, [{"title": movies[index].Title, "description": movies[index].Plot}]));
                        
                            
                        });                               
                    });
                                                                                                                      
                   });                                                                                                   
                                                                                                                     
            
            }
             
            //TEMPLATE: 
            function replaceContent(e,t){
                res=e;
                for(var n=0;n<t.length;n++){
                    res=res.replace(/\{\{(.*?)\}\}/g,function(e,r){                    
                        return t[n][r]})}
                return res
            }
                        
        </script>
        
    </head>

    <body>

        <!-- NAV BAR: -->
        <div id="navbar"></div>
    
        <!-- Sökresultat -->
        <div class="row"></div>
        

          <!--  Scripts-->
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="js/materialize.js"></script>
 <script src="js/init.js"></script>


        </body>
</html>
